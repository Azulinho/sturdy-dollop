name: slack notification on master build
on:
  terragrunt_apply:
    workflows:
      - terragrunt apply
    branches:
      - main
    types:
      - completed

jobs:
  slack:
    runs-on: ubuntu-latest
    steps:
      - name: Slack Notification
        id: slack
        uses: act10ns/slack@v1
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}
        with:
          status: ${{ github.event.terragrunt_apply.conclusion }}
          channel: '#terragrunt'
